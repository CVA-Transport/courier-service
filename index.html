<!-- index.html -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Providence Courier Service</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./style.css">
</head>

<body>
  <div class="grid" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <main class="wrap">
    <header>
      <div class="powered" aria-label="Powered by">
        <span>Powered by</span>
        <strong>WTFUG &amp; CVA</strong>
      </div>

      <div class="titleBlock">
        <h1 class="title"><span class="titleText">Providence courier service</span></h1>
        <div class="titleLine" aria-hidden="true"></div>
      </div>
    </header>

    <section class="panel" aria-label="Shipping route selectors">
      <div class="stack">

        <!-- Service status -->
        <div class="card statusCard" aria-label="Service status">
          <div class="statusLeft">
            <div class="statusLabel">Service status</div>
            <div class="statusMain">Normal Operations — Service Active</div>
          </div>

          <div class="statusPill" aria-label="Service is active">
            <span class="dot" aria-hidden="true"></span>
            <span class="statusText">Active</span>
          </div>
        </div>

        <!-- Contract details -->
        <div class="card contractCard" aria-label="Contract requirements">
          <div class="contractTitle">
            <span>Contract requirements</span>
            <!-- badge removed -->
          </div>

          <div class="kvGrid">
            <div class="kv">
              <div class="k">Contract to</div>

              <div class="v" id="contractTo" style="display:flex; align-items:center; gap:10px;">
                Pierre Spencer
                <span
                  id="copyContractTo"
                  role="button"
                  tabindex="0"
                  title="Copy"
                  style="cursor:pointer; font-size:12px; letter-spacing:.14em; text-transform:uppercase; color: rgba(216,192,140,.95); user-select:none;"
                >
                  Copy
                </span>
              </div>
            </div>

            <div class="kv">
              <div class="k">Collateral</div>
              <div class="v">5B ISK (maximum)</div>
            </div>
            <div class="kv">
              <div class="k">Time to accept</div>
              <div class="v">3 DAYS</div>
            </div>
            <div class="kv">
              <div class="k">Time to complete</div>
              <div class="v">3 DAYS</div>
            </div>
            <div class="kv">
              <div class="k">Max Volume</div>
              <div class="v">60 000 m3</div>
            </div>

            <div class="kv">
              <div class="k">Notes</div>
              <div class="v">janice link (not required)</div>
            </div>
          </div>
        </div>

        <!-- Pick up / Destination -->
        <div class="boxes">

          <!-- PICK UP -->
          <div class="box">
            <div class="boxLabel">
              <span>Pick up station</span>
              <div class="tag">Origin</div>
            </div>

            <div class="field" data-field data-dropdown-field>
              <svg class="fieldIcon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 21s7-5.2 7-11a7 7 0 1 0-14 0c0 5.8 7 11 7 11Z" stroke="currentColor" stroke-width="1.6"/>
                <path d="M12 12.2a2.2 2.2 0 1 0 0-4.4 2.2 2.2 0 0 0 0 4.4Z" stroke="currentColor" stroke-width="1.6"/>
              </svg>

              <input
                class="fieldInput"
                id="pickup"
                type="text"
                placeholder="Type a station name…"
                autocomplete="off"
                spellcheck="false"
              />

              <button class="fieldClear" type="button" aria-label="Clear pick up">
                <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M7 7l10 10M17 7L7 17" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                </svg>
              </button>

              <div class="fieldHint">Ex: “KBP7-G - Heir of Athra”</div>

              <!-- Dropdown -->
              <div class="dd" data-dd>
                <div class="ddPanel">
                  <div class="ddList" data-dd-list role="listbox" aria-label="Pick up station list">
                    <button class="ddItem" type="button" data-value="Amarr VIII - Emperor Family Academy">Amarr VIII - Emperor Family Academy</button>
                    <button class="ddItem" type="button" data-value="Jita 4.4 - Caldary Navy Assembly Plant">Jita 4.4 - Caldary Navy Assembly Plant</button>
                  </div>

                  <!-- (kept in HTML but visually hidden via CSS) -->
                  <div class="ddControls" aria-hidden="true">
                    <button class="ddScroll" type="button" data-dd-up title="Scroll up">▲</button>
                    <div class="ddTrack"><div class="ddThumb"></div></div>
                    <button class="ddScroll" type="button" data-dd-down title="Scroll down">▼</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- DESTINATION -->
          <div class="box">
            <div class="boxLabel">
              <span>Destination</span>
              <div class="tag">Drop</div>
            </div>

            <div class="field" data-field data-dropdown-field>
              <svg class="fieldIcon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M20 10.6c0 5.2-8 10.4-8 10.4S4 15.8 4 10.6a8 8 0 1 1 16 0Z" stroke="currentColor" stroke-width="1.6"/>
                <path d="M12 12.4a2.6 2.6 0 1 0 0-5.2 2.6 2.6 0 0 0 0 5.2Z" stroke="currentColor" stroke-width="1.6"/>
              </svg>

              <input
                class="fieldInput"
                id="destination"
                type="text"
                placeholder="Type a destination…"
                autocomplete="off"
                spellcheck="false"
              />

              <button class="fieldClear" type="button" aria-label="Clear destination">
                <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M7 7l10 10M17 7L7 17" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                </svg>
              </button>

              <div class="fieldHint">Ex: “XHQ-7V - CVA Immortalis”</div>

              <!-- Dropdown -->
              <div class="dd" data-dd>
                <div class="ddPanel">
                  <div class="ddList" data-dd-list role="listbox" aria-label="Destination list">
                    <button class="ddItem" type="button" data-value="Amarr VIII - Emperor Family Academy">Amarr VIII - Emperor Family Academy</button>
                    <button class="ddItem" type="button" data-value="Jita 4.4 - Caldary Navy Assembly Plant">Jita 4.4 - Caldary Navy Assembly Plant</button>
                  </div>

                  <!-- (kept in HTML but visually hidden via CSS) -->
                  <div class="ddControls" aria-hidden="true">
                    <button class="ddScroll" type="button" data-dd-up title="Scroll up">▲</button>
                    <div class="ddTrack"><div class="ddThumb"></div></div>
                    <button class="ddScroll" type="button" data-dd-down title="Scroll down">▼</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>

        <!-- Coming soon -->
        <div class="card soonCard" aria-label="Coming soon">
          <div class="soonText"><strong>Jump Freight</strong> services are coming soon</div>
        </div>

      </div>
    </section>
  </main>

  <script>
    // Tiny UX sugar: show clear button only when input has value
    (function () {
      const fields = document.querySelectorAll("[data-field]");
      fields.forEach(field => {
        const input = field.querySelector(".fieldInput");
        const clear = field.querySelector(".fieldClear");
        if (!input || !clear) return;

        const sync = () => {
          field.classList.toggle("hasValue", input.value.trim().length > 0);
        };

        input.addEventListener("input", sync);
        input.addEventListener("change", sync);

        clear.addEventListener("click", (e) => {
          e.stopPropagation();
          input.value = "";
          sync();
          input.focus();
        });

        sync();
      });
    })();

    // Simple copy for "Contract to"
    (function () {
      const btn = document.getElementById("copyContractTo");
      if (!btn) return;

      const copy = async () => {
        const text = "Pierre Spencer";
        try { await navigator.clipboard.writeText(text); }
        catch { try { document.execCommand("copy"); } catch(e) {} }
        btn.textContent = "Copied";
        setTimeout(() => (btn.textContent = "Copy"), 900);
      };

      btn.addEventListener("click", copy);
      btn.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") copy();
      });
    })();

    // Dropdowns for Pick up / Destination (whole field clickable + flexible)
    (function () {
      const fields = document.querySelectorAll("[data-dropdown-field]");
      const closeAll = () => fields.forEach(f => f.classList.remove("ddOpen"));

      fields.forEach(field => {
        const input = field.querySelector(".fieldInput");
        const items = Array.from(field.querySelectorAll(".ddItem"));
        if (!input) return;

        const open = () => {
          closeAll();
          field.classList.add("ddOpen");
        };

        const filter = () => {
          const q = input.value.trim().toLowerCase();
          items.forEach(btn => {
            const t = (btn.dataset.value || btn.textContent || "").toLowerCase();
            btn.style.display = !q || t.includes(q) ? "" : "none";
          });
        };

        // ✅ Toute la zone .field (icône + fond + hint) focus l'input et ouvre le dropdown
        field.addEventListener("pointerdown", (e) => {
          if (e.target === input) return;
          if (e.target.closest(".dd")) return;          // clique dans le dropdown -> ok
          if (e.target.closest(".fieldClear")) return;  // clear géré ailleurs
          e.preventDefault();
          input.focus({ preventScroll: true });
          open();
          filter();
        });

        input.addEventListener("focus", () => { open(); filter(); });
        input.addEventListener("click",  () => { open(); filter(); });
        input.addEventListener("input",  () => { open(); filter(); });

        // Pick item
        items.forEach(btn => {
          btn.addEventListener("click", () => {
            input.value = btn.dataset.value || btn.textContent.trim();
            input.dispatchEvent(new Event("input", { bubbles: true }));
            field.classList.remove("ddOpen");
          });
        });

        // Escape to close
        input.addEventListener("keydown", (e) => {
          if (e.key === "Escape") field.classList.remove("ddOpen");
        });
      });

      // Close when clicking outside
      document.addEventListener("pointerdown", (e) => {
        const inside = e.target.closest("[data-dropdown-field]");
        if (!inside) closeAll();
      });
    })();
  </script>
</body>
</html>
