<!DOCTYPE html>
<html lang="fr">
<head>
  <!-- Document metadata -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Providence Courier Service</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- App styles -->
  <link rel="stylesheet" href="./style.css">

  <!-- Locked field UI state (visual + interaction cues) -->
  <style>
    .field.isLocked{
      opacity: .55;
      cursor: not-allowed;
    }
    .field.isLocked .fieldToggle,
    .field.isLocked .fieldClear{
      opacity: .6;
    }
  </style>
</head>

<body>
  <main class="wrap">
    <header class="header">
      <div class="powered" aria-label="Powered by">
        <span>Powered by</span>
        <strong>WTFUG &amp; CVA</strong>
      </div>

      <h1 class="title">Providence courier service</h1>
      <div class="titleLine" aria-hidden="true"></div>
    </header>

    <section class="panel" aria-label="Shipping route selectors">
      <div class="stack">

        <!-- Service status summary -->
        <div class="card statusCard" aria-label="Service status">
          <div class="statusLeft">
            <div class="statusLabel">Service status</div>
            <div class="statusMain">Normal Operations — Service Active</div>
          </div>

          <div class="statusPill" aria-label="Service is active">
            <span class="dot" aria-hidden="true"></span>
            <span class="statusText">Active</span>
          </div>
        </div>

        <!-- Contract details panel -->
        <div class="card contractCard" aria-label="Contract requirements">
          <div class="sectionTitle">Contract requirements</div>

          <div class="kvGrid">
            <div class="kv">
              <div class="k">Contract to</div>
              <div class="v" id="contractTo">
                <span>Pierre Spencer</span>
                <button id="copyContractTo" class="linkBtn" type="button" title="Copy">Copy</button>
              </div>
            </div>

            <div class="kv">
              <div class="k">Time to accept</div>
              <div class="v">3 DAYS</div>
            </div>

            <div class="kv">
              <div class="k">Time to complete</div>
              <div class="v">3 DAYS</div>
            </div>

            <div class="kv">
              <div class="k">Collateral</div>
              <div class="v">5B ISK (maximum)</div>
            </div>

            <div class="kv">
              <div class="k">Max Volume</div>
              <div class="v">60 000 m3</div>
            </div>

            <div class="kv">
              <div class="k">Notes</div>
              <div class="v">janice link (not required)</div>
            </div>
          </div>
        </div>

        <!-- Route selectors -->
        <div class="boxes">

          <!-- PICK UP -->
          <div class="box">
            <div class="boxLabel">
              <span>Pick up station</span>
              <div class="tag">Origin</div>
            </div>

            <!-- Dropdown field: pickup -->
            <div class="field" data-field data-dropdown-field>
              <svg class="fieldIcon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 21s7-5.2 7-11a7 7 0 1 0-14 0c0 5.8 7 11 7 11Z" stroke="currentColor" stroke-width="1.6"/>
                <path d="M12 12.2a2.2 2.2 0 1 0 0-4.4 2.2 2.2 0 0 0 0 4.4Z" stroke="currentColor" stroke-width="1.6"/>
              </svg>

              <input
                class="fieldInput"
                id="pickup"
                type="text"
                value="Jita 4.4 - Caldary Navy Assembly Plant"
                placeholder="Select pick up…"
                autocomplete="off"
                spellcheck="false"
                readonly
              />

              <!-- Clear current selection -->
              <button class="fieldClear" type="button" aria-label="Clear pick up">
                <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M7 7l10 10M17 7L7 17" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                </svg>
              </button>

              <!-- Open/close dropdown -->
              <button class="fieldToggle" type="button" aria-label="Toggle pick up list">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path
                    d="M7 10l5 5 5-5"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </button>

              <!-- Dropdown panel -->
              <div class="dd" data-dd>
                <div class="ddPanel" role="listbox" aria-label="Pick up station list">
                  <!-- Search -->
                  <div class="ddSearch">
                    <div class="ddSearchWrap">
                      <input class="ddSearchInput" type="text" placeholder="Search…" autocomplete="off" spellcheck="false" />
                      <svg class="ddSearchIcon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="1.8"/>
                        <path d="M16.2 16.2 21 21" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                      </svg>
                    </div>
                  </div>

                  <!-- List -->
                  <div class="ddBody">
                    <div class="ddList" data-dd-list>

                      <div class="ddGroup" data-group="npc">
                        <div class="ddGroupTitle">NPC Space</div>

                        <button class="ddItem" type="button" data-value="Jita 4.4 - Caldary Navy Assembly Plant">Jita 4.4 - Caldary Navy Assembly Plant</button>
                        <button class="ddItem" type="button" data-value="Amarr VIII - Emperor Family Academy">Amarr VIII - Emperor Family Academy</button>
                      </div>

                      <div class="ddGroup" data-group="cva">
                        <div class="ddGroupTitle">Curatores Veritatis Alliance</div>

                        <button class="ddItem" type="button" data-value="XHQ-7V - CVA Immortalis">XHQ-7V - CVA Immortalis</button>
                        <button class="ddItem" type="button" data-value="KBP7-G - Heir of Athra">KBP7-G - Heir of Athra</button>
                        <button class="ddItem" type="button" data-value="B-WPLZ - Support">B-WPLZ - Support</button>

                        <button class="ddItem" type="button" data-value="U-HYMT - Crossing the Rubicon">U-HYMT - Crossing the Rubicon</button>
                        <button class="ddItem" type="button" data-value="KBP7-G - The Ark">KBP7-G - The Ark</button>
                        <button class="ddItem" type="button" data-value="B-WPLZ - Stahlfabrik">B-WPLZ - Stahlfabrik</button>

                        <button class="ddItem" type="button" data-value="XHQ-7V - T2 Parts">XHQ-7V - T2 Parts</button>
                        <button class="ddItem" type="button" data-value="XHQ-7V - T2 Ships">XHQ-7V - T2 Ships</button>
                        <button class="ddItem" type="button" data-value="E-YCML - New Refinery">E-YCML - New Refinery</button>
                        <button class="ddItem" type="button" data-value="Y9-MDG - Shubb's Hub">Y9-MDG - Shubb's Hub</button>
                        <button class="ddItem" type="button" data-value="K1Y-5H - Compression Center">K1Y-5H - Compression Center</button>
                        <button class="ddItem" type="button" data-value="IWZ3-C - Reprocessing Centre">IWZ3-C - Reprocessing Centre</button>
                        <button class="ddItem" type="button" data-value="IWZ3-C - Shady Acres">IWZ3-C - Shady Acres</button>
                        <button class="ddItem" type="button" data-value="N-RMSH - Asteroid Research Station">N-RMSH - Asteroid Research Station</button>
                        <button class="ddItem" type="button" data-value="N-RMSH - ME-Research">N-RMSH - ME-Research</button>
                        <button class="ddItem" type="button" data-value="O-Y5JQ - Llama Pen">O-Y5JQ - Llama Pen</button>
                        <button class="ddItem" type="button" data-value="9-F0B2 - Salt Mine">9-F0B2 - Salt Mine</button>
                        <button class="ddItem" type="button" data-value="4B-NQN - Vogsphere">4B-NQN - Vogsphere</button>
                        <button class="ddItem" type="button" data-value="49GC-R - Beyond Midway">49GC-R - Beyond Midway</button>
                        <button class="ddItem" type="button" data-value="49GC-R - Factory">49GC-R - Factory</button>
                        <button class="ddItem" type="button" data-value="49GC-R - Oblivion">49GC-R - Oblivion</button>
                        <button class="ddItem" type="button" data-value="U-HYMT - Laboratory">U-HYMT - Laboratory</button>
                        <button class="ddItem" type="button" data-value="U-HYMT - Refinery">U-HYMT - Refinery</button>
                        <button class="ddItem" type="button" data-value="U-HYMT - Tater Field">U-HYMT - Tater Field</button>
                        <button class="ddItem" type="button" data-value="FC-3YI - CVA Bank and Trust">FC-3YI - CVA Bank and Trust</button>
                        <button class="ddItem" type="button" data-value="FC-3YI - Light of Providence">FC-3YI - Light of Providence</button>
                        <button class="ddItem" type="button" data-value="FC-3YI - The Two Towers">FC-3YI - The Two Towers</button>
                        <button class="ddItem" type="button" data-value="5IO8-U - Bastet Requiem's - Ore sucker">5IO8-U - Bastet Requiem's - Ore sucker</button>
                        <button class="ddItem" type="button" data-value="5IO8-U - Burning's House">5IO8-U - Burning's House</button>
                        <button class="ddItem" type="button" data-value="QR-K85 - Gulf of Providence">QR-K85 - Gulf of Providence</button>
                        <button class="ddItem" type="button" data-value="OXIY-V - Duuuuuun Idahooo">OXIY-V - Duuuuuun Idahooo</button>
                        <button class="ddItem" type="button" data-value="OXIY-V - Treehouse">OXIY-V - Treehouse</button>
                      </div>

                      <div class="ddGroup" data-group="outsmarted">
                        <div class="ddGroupTitle">Outsmarted</div>

                        <button class="ddItem" type="button" data-value="3GXF-U - Black Mesa">3GXF-U - Black Mesa</button>
                        <button class="ddItem" type="button" data-value="VKI-T7 - Home Sweet Home">VKI-T7 - Home Sweet Home</button>
                        <button class="ddItem" type="button" data-value="VKI-T7 - Azbel">VKI-T7 - Azbel</button>
                        <button class="ddItem" type="button" data-value="VKI-T7 - Sektor 47">VKI-T7 - Sektor 47</button>
                        <button class="ddItem" type="button" data-value="H-GKI6 - Care Hub">H-GKI6 - Care Hub</button>
                        <button class="ddItem" type="button" data-value="H-GKI6 - Fuel Factory">H-GKI6 - Fuel Factory</button>
                        <button class="ddItem" type="button" data-value="H-GKI6 - Ice Refinery">H-GKI6 - Ice Refinery</button>
                        <button class="ddItem" type="button" data-value="8P9-BM - In honor of Edita Aldent">8P9-BM - In honor of Edita Aldent</button>
                        <button class="ddItem" type="button" data-value="8P9-BM - OA2">8P9-BM - OA2</button>
                        <button class="ddItem" type="button" data-value="YQB-22 - Fortizar">YQB-22 - Fortizar</button>
                        <button class="ddItem" type="button" data-value="F-YH5B - OA1">F-YH5B - OA1</button>
                      </div>

                      <div class="ddGroup" data-group="red">
                        <div class="ddGroupTitle">RED Alliance</div>

                        <button class="ddItem" type="button" data-value="H6-CX8 - Footizar C-">H6-CX8 - Footizar C-</button>
                        <button class="ddItem" type="button" data-value="Shintaht - Athanor C+">Shintaht - Athanor C+</button>
                        <button class="ddItem" type="button" data-value="Shintaht - Minas Itil">Shintaht - Minas Itil</button>
                        <button class="ddItem" type="button" data-value="Shintaht - Raitaru C+">Shintaht - Raitaru C+</button>

                        <button class="ddItem" type="button" data-value="D-6WS1 - Central Ferox Factory B">D-6WS1 - Central Ferox Factory B</button>
                        <button class="ddItem" type="button" data-value="D-6WS1 - Fires Of Doom C+">D-6WS1 - Fires Of Doom C+</button>
                        <button class="ddItem" type="button" data-value="D-6WS1 - Moros Navy Evil Lair B">D-6WS1 - Moros Navy Evil Lair B</button>

                        <button class="ddItem" type="button" data-value="SI-I89 - Building Thingy C+">SI-I89 - Building Thingy C+</button>
                        <button class="ddItem" type="button" data-value="SI-I89 - Central Repro Center B-">SI-I89 - Central Repro Center B-</button>
                        <button class="ddItem" type="button" data-value="SI-I89 - I am very sleepy">SI-I89 - I am very sleepy</button>

                        <button class="ddItem" type="button" data-value="UL-7I8 - Red Fox">UL-7I8 - Red Fox</button>
                        <button class="ddItem" type="button" data-value="ERVK-P - RED Star">ERVK-P - RED Star</button>

                        <button class="ddItem" type="button" data-value="BR-N97 - Lear's Advanced Lair">BR-N97 - Lear's Advanced Lair</button>
                        <button class="ddItem" type="button" data-value="BR-N97 - Lear's Big Lair">BR-N97 - Lear's Big Lair</button>
                        <button class="ddItem" type="button" data-value="BR-N97 - Lear's Heaven">BR-N97 - Lear's Heaven</button>

                        <button class="ddItem" type="button" data-value="IS-R7P - Tatoshila's Palace">IS-R7P - Tatoshila's Palace</button>
                        <button class="ddItem" type="button" data-value="I-MGAB - Yggdrasill">I-MGAB - Yggdrasill</button>
                        <button class="ddItem" type="button" data-value="18XA-C - Homeland of crabs">18XA-C - Homeland of crabs</button>
                        <button class="ddItem" type="button" data-value="Z-RFE3 - Mother Teresa">Z-RFE3 - Mother Teresa</button>
                      </div>

                      <div class="ddGroup" data-group="linknet">
                        <div class="ddGroupTitle">Linknet</div>
                        <div class="ddEmpty">More locations in this area are coming soon</div>
                      </div>

                      <div class="ddGroup" data-group="reeloaded">
                        <div class="ddGroupTitle">Reeloaded</div>
                        <div class="ddEmpty">More locations in this area are coming soon</div>
                      </div>

                      <div class="ddGroup" data-group="burning">
                        <div class="ddGroupTitle">Burning Contingent</div>
                        <div class="ddEmpty">More locations in this area are coming soon</div>
                      </div>

                      <div class="ddGroup" data-group="d3adend">
                        <div class="ddGroupTitle">D3ad End</div>
                        <div class="ddEmpty">More locations in this area are coming soon</div>
                      </div>

                    </div>

                    <!-- Custom scroll controls -->
                    <div class="ddControls">
                      <button class="ddScroll" type="button" data-dd-up aria-label="Scroll up">
                        <svg viewBox="0 0 24 24" aria-hidden="true">
                          <path
                            d="M7 14l5-5 5 5"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          />
                        </svg>
                      </button>

                      <div class="ddRail" aria-hidden="true">
                        <div class="ddThumb" aria-hidden="true"></div>
                      </div>

                      <button class="ddScroll" type="button" data-dd-down aria-label="Scroll down">
                        <svg viewBox="0 0 24 24" aria-hidden="true">
                          <path
                            d="M7 10l5 5 5-5"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          />
                        </svg>
                      </button>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>

          <!-- DESTINATION -->
          <div class="box">
            <div class="boxLabel">
              <span>Destination</span>
              <div class="tag">Drop</div>
            </div>

            <!-- Dropdown field: destination -->
            <div class="field" data-field data-dropdown-field>
              <svg class="fieldIcon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M20 10.6c0 5.2-8 10.4-8 10.4S4 15.8 4 10.6a8 8 0 1 1 16 0Z" stroke="currentColor" stroke-width="1.6"/>
                <path d="M12 12.4a2.6 2.6 0 1 0 0-5.2 2.6 2.6 0 0 0 0 5.2Z" stroke="currentColor" stroke-width="1.6"/>
              </svg>

              <input
                class="fieldInput"
                id="destination"
                type="text"
                value="Amarr VIII - Emperor Family Academy"
                placeholder="Select destination…"
                autocomplete="off"
                spellcheck="false"
                readonly
              />

              <!-- Clear current selection -->
              <button class="fieldClear" type="button" aria-label="Clear destination">
                <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M7 7l10 10M17 7L7 17" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                </svg>
              </button>

              <!-- Open/close dropdown -->
              <button class="fieldToggle" type="button" aria-label="Toggle destination list">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path
                    d="M7 10l5 5 5-5"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </button>

              <!-- Dropdown panel -->
              <div class="dd" data-dd>
                <div class="ddPanel" role="listbox" aria-label="Destination list">
                  <!-- Search -->
                  <div class="ddSearch">
                    <div class="ddSearchWrap">
                      <input class="ddSearchInput" type="text" placeholder="Search…" autocomplete="off" spellcheck="false" />
                      <svg class="ddSearchIcon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="1.8"/>
                        <path d="M16.2 16.2 21 21" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                      </svg>
                    </div>
                  </div>

                  <!-- List -->
                  <div class="ddBody">
                    <div class="ddList" data-dd-list>

                      <div class="ddGroup" data-group="npc">
                        <div class="ddGroupTitle">NPC Space</div>

                        <button class="ddItem" type="button" data-value="Jita 4.4 - Caldary Navy Assembly Plant">Jita 4.4 - Caldary Navy Assembly Plant</button>
                        <button class="ddItem" type="button" data-value="Amarr VIII - Emperor Family Academy">Amarr VIII - Emperor Family Academy</button>
                      </div>

                      <div class="ddGroup" data-group="cva">
                        <div class="ddGroupTitle">Curatores Veritatis Alliance</div>

                        <button class="ddItem" type="button" data-value="XHQ-7V - CVA Immortalis">XHQ-7V - CVA Immortalis</button>
                        <button class="ddItem" type="button" data-value="KBP7-G - Heir of Athra">KBP7-G - Heir of Athra</button>
                        <button class="ddItem" type="button" data-value="B-WPLZ - Support">B-WPLZ - Support</button>

                        <button class="ddItem" type="button" data-value="U-HYMT - Crossing the Rubicon">U-HYMT - Crossing the Rubicon</button>
                        <button class="ddItem" type="button" data-value="KBP7-G - The Ark">KBP7-G - The Ark</button>
                        <button class="ddItem" type="button" data-value="B-WPLZ - Stahlfabrik">B-WPLZ - Stahlfabrik</button>

                        <button class="ddItem" type="button" data-value="XHQ-7V - T2 Parts">XHQ-7V - T2 Parts</button>
                        <button class="ddItem" type="button" data-value="XHQ-7V - T2 Ships">XHQ-7V - T2 Ships</button>
                        <button class="ddItem" type="button" data-value="E-YCML - New Refinery">E-YCML - New Refinery</button>
                        <button class="ddItem" type="button" data-value="Y9-MDG - Shubb's Hub">Y9-MDG - Shubb's Hub</button>
                        <button class="ddItem" type="button" data-value="K1Y-5H - Compression Center">K1Y-5H - Compression Center</button>
                        <button class="ddItem" type="button" data-value="IWZ3-C - Reprocessing Centre">IWZ3-C - Reprocessing Centre</button>
                        <button class="ddItem" type="button" data-value="IWZ3-C - Shady Acres">IWZ3-C - Shady Acres</button>
                        <button class="ddItem" type="button" data-value="N-RMSH - Asteroid Research Station">N-RMSH - Asteroid Research Station</button>
                        <button class="ddItem" type="button" data-value="N-RMSH - ME-Research">N-RMSH - ME-Research</button>
                        <button class="ddItem" type="button" data-value="O-Y5JQ - Llama Pen">O-Y5JQ - Llama Pen</button>
                        <button class="ddItem" type="button" data-value="9-F0B2 - Salt Mine">9-F0B2 - Salt Mine</button>
                        <button class="ddItem" type="button" data-value="4B-NQN - Vogsphere">4B-NQN - Vogsphere</button>
                        <button class="ddItem" type="button" data-value="49GC-R - Beyond Midway">49GC-R - Beyond Midway</button>
                        <button class="ddItem" type="button" data-value="49GC-R - Factory">49GC-R - Factory</button>
                        <button class="ddItem" type="button" data-value="49GC-R - Oblivion">49GC-R - Oblivion</button>
                        <button class="ddItem" type="button" data-value="U-HYMT - Laboratory">U-HYMT - Laboratory</button>
                        <button class="ddItem" type="button" data-value="U-HYMT - Refinery">U-HYMT - Refinery</button>
                        <button class="ddItem" type="button" data-value="U-HYMT - Tater Field">U-HYMT - Tater Field</button>
                        <button class="ddItem" type="button" data-value="FC-3YI - CVA Bank and Trust">FC-3YI - CVA Bank and Trust</button>
                        <button class="ddItem" type="button" data-value="FC-3YI - Light of Providence">FC-3YI - Light of Providence</button>
                        <button class="ddItem" type="button" data-value="FC-3YI - The Two Towers">FC-3YI - The Two Towers</button>
                        <button class="ddItem" type="button" data-value="5IO8-U - Bastet Requiem's - Ore sucker">5IO8-U - Bastet Requiem's - Ore sucker</button>
                        <button class="ddItem" type="button" data-value="5IO8-U - Burning's House">5IO8-U - Burning's House</button>
                        <button class="ddItem" type="button" data-value="QR-K85 - Gulf of Providence">QR-K85 - Gulf of Providence</button>
                        <button class="ddItem" type="button" data-value="OXIY-V - Duuuuuun Idahooo">OXIY-V - Duuuuuun Idahooo</button>
                        <button class="ddItem" type="button" data-value="OXIY-V - Treehouse">OXIY-V - Treehouse</button>
                      </div>

                      <div class="ddGroup" data-group="outsmarted">
                        <div class="ddGroupTitle">Outsmarted</div>

                        <button class="ddItem" type="button" data-value="3GXF-U - Black Mesa">3GXF-U - Black Mesa</button>
                        <button class="ddItem" type="button" data-value="VKI-T7 - Home Sweet Home">VKI-T7 - Home Sweet Home</button>
                        <button class="ddItem" type="button" data-value="VKI-T7 - Azbel">VKI-T7 - Azbel</button>
                        <button class="ddItem" type="button" data-value="VKI-T7 - Sektor 47">VKI-T7 - Sektor 47</button>
                        <button class="ddItem" type="button" data-value="H-GKI6 - Care Hub">H-GKI6 - Care Hub</button>
                        <button class="ddItem" type="button" data-value="H-GKI6 - Fuel Factory">H-GKI6 - Fuel Factory</button>
                        <button class="ddItem" type="button" data-value="H-GKI6 - Ice Refinery">H-GKI6 - Ice Refinery</button>
                        <button class="ddItem" type="button" data-value="8P9-BM - In honor of Edita Aldent">8P9-BM - In honor of Edita Aldent</button>
                        <button class="ddItem" type="button" data-value="8P9-BM - OA2">8P9-BM - OA2</button>
                        <button class="ddItem" type="button" data-value="YQB-22 - Fortizar">YQB-22 - Fortizar</button>
                        <button class="ddItem" type="button" data-value="F-YH5B - OA1">F-YH5B - OA1</button>
                      </div>

                      <div class="ddGroup" data-group="red">
                        <div class="ddGroupTitle">RED Alliance</div>

                        <button class="ddItem" type="button" data-value="H6-CX8 - Footizar C-">H6-CX8 - Footizar C-</button>
                        <button class="ddItem" type="button" data-value="Shintaht - Athanor C+">Shintaht - Athanor C+</button>
                        <button class="ddItem" type="button" data-value="Shintaht - Minas Itil">Shintaht - Minas Itil</button>
                        <button class="ddItem" type="button" data-value="Shintaht - Raitaru C+">Shintaht - Raitaru C+</button>

                        <button class="ddItem" type="button" data-value="D-6WS1 - Central Ferox Factory B">D-6WS1 - Central Ferox Factory B</button>
                        <button class="ddItem" type="button" data-value="D-6WS1 - Fires Of Doom C+">D-6WS1 - Fires Of Doom C+</button>
                        <button class="ddItem" type="button" data-value="D-6WS1 - Moros Navy Evil Lair B">D-6WS1 - Moros Navy Evil Lair B</button>

                        <button class="ddItem" type="button" data-value="SI-I89 - Building Thingy C+">SI-I89 - Building Thingy C+</button>
                        <button class="ddItem" type="button" data-value="SI-I89 - Central Repro Center B-">SI-I89 - Central Repro Center B-</button>
                        <button class="ddItem" type="button" data-value="SI-I89 - I am very sleepy">SI-I89 - I am very sleepy</button>

                        <button class="ddItem" type="button" data-value="UL-7I8 - Red Fox">UL-7I8 - Red Fox</button>
                        <button class="ddItem" type="button" data-value="ERVK-P - RED Star">ERVK-P - RED Star</button>

                        <button class="ddItem" type="button" data-value="BR-N97 - Lear's Advanced Lair">BR-N97 - Lear's Advanced Lair</button>
                        <button class="ddItem" type="button" data-value="BR-N97 - Lear's Big Lair">BR-N97 - Lear's Big Lair</button>
                        <button class="ddItem" type="button" data-value="BR-N97 - Lear's Heaven">BR-N97 - Lear's Heaven</button>

                        <button class="ddItem" type="button" data-value="IS-R7P - Tatoshila's Palace">IS-R7P - Tatoshila's Palace</button>
                        <button class="ddItem" type="button" data-value="I-MGAB - Yggdrasill">I-MGAB - Yggdrasill</button>
                        <button class="ddItem" type="button" data-value="18XA-C - Homeland of crabs">18XA-C - Homeland of crabs</button>
                        <button class="ddItem" type="button" data-value="Z-RFE3 - Mother Teresa">Z-RFE3 - Mother Teresa</button>
                      </div>

                      <div class="ddGroup" data-group="linknet">
                        <div class="ddGroupTitle">Linknet</div>
                        <div class="ddEmpty">More locations in this area are coming soon</div>
                      </div>

                      <div class="ddGroup" data-group="reeloaded">
                        <div class="ddGroupTitle">Reeloaded</div>
                        <div class="ddEmpty">More locations in this area are coming soon</div>
                      </div>

                      <div class="ddGroup" data-group="burning">
                        <div class="ddGroupTitle">Burning Contingent</div>
                        <div class="ddEmpty">More locations in this area are coming soon</div>
                      </div>

                      <div class="ddGroup" data-group="d3adend">
                        <div class="ddGroupTitle">D3ad End</div>
                        <div class="ddEmpty">More locations in this area are coming soon</div>
                      </div>

                    </div>

                    <!-- Custom scroll controls -->
                    <div class="ddControls">
                      <button class="ddScroll" type="button" data-dd-up aria-label="Scroll up">
                        <svg viewBox="0 0 24 24" aria-hidden="true">
                          <path
                            d="M7 14l5-5 5 5"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          />
                        </svg>
                      </button>

                      <div class="ddRail" aria-hidden="true">
                        <div class="ddThumb" aria-hidden="true"></div>
                      </div>

                      <button class="ddScroll" type="button" data-dd-down aria-label="Scroll down">
                        <svg viewBox="0 0 24 24" aria-hidden="true">
                          <path
                            d="M7 10l5 5 5-5"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          />
                        </svg>
                      </button>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>

        </div>

        <!-- Quote / Validation -->
        <div class="card quoteCard" aria-label="Quote validation">
          <div class="quoteTop">
            <div>
              <div class="sectionTitle">Quote</div>
              <div class="quoteHint">Select pick up + destination, then validate.</div>
            </div>

            <button id="validateQuote" class="primaryBtn" type="button" disabled>
              Validate
            </button>
          </div>

          <div class="priceRow" id="priceRow" hidden>
            <div class="priceLabel">Price</div>
            <div class="priceValue">
              <span id="priceText">—</span>
              <button id="copyPrice" class="linkBtn" type="button" title="Copy amount" disabled>Copy</button>
            </div>
          </div>
        </div>

        <!-- Placeholder / roadmap callout -->
        <div class="card soonCard" aria-label="Coming soon">
          <div class="soonText"><strong>Jump Freight</strong> services are coming soon</div>
        </div>

      </div>
    </section>
  </main>

  <!-- Footer credits -->
  <footer
    style="
      max-width: 1080px;
      margin: 90px auto 26px;
      padding: 0 18px;
      text-align: center;
      font-size: 12px;
      letter-spacing: .14em;
      text-transform: uppercase;
      color: rgba(242,243,245,.60);
    "
  >
    Engineering by
    <span style="color: rgba(242,243,245,.92); font-weight: 600;">
      Pierre Spencer
    </span>
    ·
    Design by
    <span style="color: rgba(224,198,139,.95); font-weight: 600;">
      Charles A.
    </span>
  </footer>

  <script>
    // -------------------------
    // Utilities
    // -------------------------

    // Copy helper with modern API + legacy fallback
    const copyToClipboard = async (text) => {
      try {
        await navigator.clipboard.writeText(text);
        return true;
      } catch {
        try {
          document.execCommand("copy");
          return true;
        } catch (e) {
          return false;
        }
      }
    };

    // One-time event binding to prevent duplicated handlers
    const bindCopyButton = (btn, getText) => {
      if (!btn) return;
      if (btn.__boundCopy) return;
      btn.__boundCopy = true;

      btn.addEventListener("click", async () => {
        if (btn.disabled) return;

        const original = btn.__originalText || btn.textContent;
        btn.__originalText = original;

        const text = typeof getText === "function" ? getText() : String(getText || "");
        if (!text) return;

        const ok = await copyToClipboard(text);
        btn.textContent = ok ? "Copied" : "Copy";
        setTimeout(() => (btn.textContent = original), 900);
      });
    };

    // Normalize strings for comparisons
    const norm = (s) => (s || "").trim().toLowerCase();

    // -------------------------
    // Location grouping (NPC vs non-NPC)
    // -------------------------

    // Build a lookup map: location label -> group key
    const buildLocationGroupMap = () => {
      const m = new Map();
      document.querySelectorAll(".ddItem").forEach((btn) => {
        const v = norm(btn.dataset.value || btn.textContent || "");
        const g = btn.closest(".ddGroup")?.dataset.group || "";
        if (v && g && !m.has(v)) m.set(v, g);
      });
      return m;
    };

    let LOCATION_GROUP_MAP = null;

    // Resolve group for a given location value
    const getLocationGroup = (value) => {
      const v = norm(value || "");
      if (!v) return "";
      if (!LOCATION_GROUP_MAP) LOCATION_GROUP_MAP = buildLocationGroupMap();
      return LOCATION_GROUP_MAP.get(v) || "";
    };

    // Rule: only forbid non-NPC <-> non-NPC routes
    const isRouteValid = (pickupValue, destinationValue) => {
      const pg = getLocationGroup(pickupValue);
      const dg = getLocationGroup(destinationValue);
      if (!pg || !dg) return false;
      return (pg === "npc" || dg === "npc");
    };

    // -------------------------
    // Clear button state (show/hide)
    // -------------------------
    (function () {
      const fields = document.querySelectorAll("[data-field]");
      fields.forEach((field) => {
        const input = field.querySelector(".fieldInput");
        const clear = field.querySelector(".fieldClear");
        const ddSearch = field.querySelector(".ddSearchInput");
        if (!input || !clear) return;

        const sync = () => field.classList.toggle("hasValue", input.value.trim().length > 0);

        sync();
        input.addEventListener("input", sync);

        clear.addEventListener("click", (e) => {
          e.preventDefault();
          e.stopPropagation();

          input.value = "";
          if (ddSearch) ddSearch.value = "";

          sync();

          input.dispatchEvent(new Event("input", { bubbles: true }));
          if (ddSearch) ddSearch.dispatchEvent(new Event("input", { bubbles: true }));
        });
      });
    })();

    // -------------------------
    // Copy: "Contract to"
    // -------------------------
    (function () {
      const btn = document.getElementById("copyContractTo");
      bindCopyButton(btn, () => "Pierre Spencer");
    })();

    // -------------------------
    // Dropdowns + mutual exclusion + route restriction + scroll thumb
    // Destination is locked until pickup is selected
    // -------------------------
    (function () {
      const fields = Array.from(document.querySelectorAll("[data-dropdown-field]"));
      const pickup = document.getElementById("pickup");
      const destination = document.getElementById("destination");

      // Helper: find the .field wrapper by input id
      const getFieldByInputId = (id) => fields.find((f) => f.querySelector(".fieldInput")?.id === id) || null;
      const destinationField = getFieldByInputId("destination");

      // Enable/disable destination UI (visual + interactive)
      const setDestinationLocked = (locked) => {
        if (!destinationField || !destination) return;

        destinationField.classList.toggle("isLocked", locked);
        destinationField.setAttribute("aria-disabled", locked ? "true" : "false");

        const toggle = destinationField.querySelector(".fieldToggle");
        const clear = destinationField.querySelector(".fieldClear");

        destination.disabled = locked;
        if (toggle) toggle.disabled = locked;
        if (clear) clear.disabled = locked;

        if (locked) destinationField.classList.remove("ddOpen");
      };

      // Sync lock state based on pickup selection
      const syncDestinationLock = () => {
        const hasPickup = !!pickup?.value.trim();
        setDestinationLocked(!hasPickup);

        // If pickup is cleared, clear destination to avoid stale/locked value
        if (!hasPickup && destination && destination.value.trim()) {
          destination.value = "";
          destination.dispatchEvent(new Event("input", { bubbles: true }));
        }
      };

      // Close all dropdowns (optionally keep one open)
      const closeAll = (except) => {
        fields.forEach((f) => {
          if (!except || f !== except) f.classList.remove("ddOpen");
        });
      };

      // Update custom scrollbar UI (thumb size/position + arrows)
      const updateScrollUI = (list, rail, upBtn, downBtn, thumb, controls) => {
        if (!list || !rail || !upBtn || !downBtn || !thumb || !controls) return;

        const scrollable = list.scrollHeight > list.clientHeight + 1;
        controls.classList.toggle("isScrollable", scrollable);

        const atTop = list.scrollTop <= 0;
        const atBottom = list.scrollTop + list.clientHeight >= list.scrollHeight - 1;

        upBtn.disabled = !scrollable || atTop;
        downBtn.disabled = !scrollable || atBottom;

        if (!scrollable) {
          thumb.style.height = "0px";
          thumb.style.transform = "translateY(0px)";
          return;
        }

        const railH = rail.clientHeight;
        const maxScroll = Math.max(1, list.scrollHeight - list.clientHeight);

        const ratio = list.clientHeight / Math.max(1, list.scrollHeight);
        const h = Math.max(18, Math.floor(railH * ratio));
        const top = Math.floor((list.scrollTop / maxScroll) * Math.max(0, railH - h));

        thumb.style.height = h + "px";
        thumb.style.transform = "translateY(" + top + "px)";
      };

      // Enforce route rule by clearing the "other" field when invalid
      let enforcing = false;
      const enforceRouteRule = (changedId) => {
        if (enforcing) return;
        if (!pickup || !destination) return;

        const p = pickup.value.trim();
        const d = destination.value.trim();
        if (!p || !d) return;

        if (isRouteValid(p, d)) return;

        enforcing = true;
        try {
          if (changedId === "destination") {
            pickup.value = "";
            pickup.dispatchEvent(new Event("input", { bubbles: true }));
          } else {
            destination.value = "";
            destination.dispatchEvent(new Event("input", { bubbles: true }));
          }
        } finally {
          enforcing = false;
        }
      };

      // Filter/refresh dropdown lists based on search, selection, and route restrictions
      const refreshAllLists = () => {
        const selectedPickup = norm(pickup?.value);
        const selectedDest = norm(destination?.value);

        const pickupGroup = getLocationGroup(pickup?.value);
        const destGroup = getLocationGroup(destination?.value);

        fields.forEach((field) => {
          const input = field.querySelector(".fieldInput");
          const search = field.querySelector(".ddSearchInput");
          const list = field.querySelector("[data-dd-list]");
          const upBtn = field.querySelector("[data-dd-up]");
          const downBtn = field.querySelector("[data-dd-down]");
          const rail = field.querySelector(".ddRail");
          const thumb = field.querySelector(".ddThumb");
          const controls = field.querySelector(".ddControls");

          if (!input || !list) return;

          const q = norm(search?.value);
          const selfSelected = norm(input.value);

          // Prevent selecting the same value in both fields
          const forbid =
            input.id === "pickup" ? selectedDest :
            input.id === "destination" ? selectedPickup :
            "";

          const otherGroup =
            input.id === "pickup" ? destGroup :
            input.id === "destination" ? pickupGroup :
            "";

          // If the other selection is non-NPC, restrict to NPC only
          const restrictTo =
            otherGroup && otherGroup !== "npc"
              ? "npc"
              : "any";

          const groups = Array.from(list.querySelectorAll(".ddGroup"));

          groups.forEach((group) => {
            const groupKey = group.dataset.group || "";
            const items = Array.from(group.querySelectorAll(".ddItem"));
            const empty = group.querySelector(".ddEmpty");

            const groupAllowed =
              restrictTo === "any"
                ? true
                : (restrictTo === "npc" ? groupKey === "npc" : true);

            if (!groupAllowed) {
              group.hidden = true;
              return;
            }

            let visibleCount = 0;

            items.forEach((btn) => {
              const v = norm(btn.dataset.value || btn.textContent || "");
              const matchesQuery = !q || v.includes(q);

              const blocked = forbid && v === forbid && v !== selfSelected;

              const visible = matchesQuery && !blocked;
              btn.hidden = !visible;

              const isSel = selfSelected && v === selfSelected;
              btn.classList.toggle("isSelected", isSel);
              btn.setAttribute("aria-selected", isSel ? "true" : "false");

              if (visible) visibleCount++;
            });

            const hasItems = items.length > 0;

            if (empty) empty.hidden = !(!hasItems && !q);

            if (q) {
              group.hidden = hasItems ? (visibleCount === 0) : true;
            } else {
              if (!hasItems) group.hidden = false;
              else group.hidden = (visibleCount === 0);
            }
          });

          requestAnimationFrame(() => updateScrollUI(list, rail, upBtn, downBtn, thumb, controls));
        });
      };

      // Wire dropdown interactions for each field
      fields.forEach((field) => {
        const input = field.querySelector(".fieldInput");
        const search = field.querySelector(".ddSearchInput");
        const list = field.querySelector("[data-dd-list]");
        const items = Array.from(field.querySelectorAll(".ddItem"));
        const toggleBtn = field.querySelector(".fieldToggle");

        const upBtn = field.querySelector("[data-dd-up]");
        const downBtn = field.querySelector("[data-dd-down]");
        const rail = field.querySelector(".ddRail");
        const thumb = field.querySelector(".ddThumb");
        const controls = field.querySelector(".ddControls");

        if (!input || !list) return;

        const open = () => {
          if (input.disabled) return; // Block open when field is locked
          closeAll(field);
          field.classList.add("ddOpen");
          if (search) search.value = "";
          list.scrollTop = 0;

          refreshAllLists();

          requestAnimationFrame(() => {
            updateScrollUI(list, rail, upBtn, downBtn, thumb, controls);
            if (search) search.focus({ preventScroll: true });
          });
        };

        const close = () => {
          field.classList.remove("ddOpen");
          if (search) search.value = "";
          refreshAllLists();
        };

        const toggleOpen = () => {
          if (input.disabled) return; // Block toggle when field is locked
          if (field.classList.contains("ddOpen")) close();
          else open();
        };

        if (toggleBtn) {
          toggleBtn.addEventListener("click", (e) => {
            if (input.disabled) return;
            e.preventDefault();
            e.stopPropagation();
            toggleOpen();
          });
        }

        field.addEventListener("pointerdown", (e) => {
          if (input.disabled) return; // Block click when field is locked
          if (e.target.closest(".dd")) return;
          if (e.target.closest(".fieldClear")) return;
          if (e.target.closest(".fieldToggle")) return;

          e.preventDefault();
          open();
        });

        if (search) {
          search.addEventListener("input", () => {
            list.scrollTop = 0;
            refreshAllLists();
          });

          search.addEventListener("keydown", (e) => {
            if (e.key === "Escape") {
              e.preventDefault();
              close();
            }
          });
        }

        items.forEach((btn) => {
          btn.addEventListener("click", () => {
            const val = (btn.dataset.value || btn.textContent || "").trim();
            input.value = val;

            // Enforce mutual exclusion (no identical pickup/destination)
            if (input.id === "pickup" && destination && norm(destination.value) === norm(val)) {
              destination.value = "";
              destination.dispatchEvent(new Event("input", { bubbles: true }));
            }
            if (input.id === "destination" && pickup && norm(pickup.value) === norm(val)) {
              pickup.value = "";
              pickup.dispatchEvent(new Event("input", { bubbles: true }));
            }

            enforceRouteRule(input.id);

            input.dispatchEvent(new Event("input", { bubbles: true }));
            close();
          });
        });

        // Scroll controls
        const step = 160;
        if (upBtn) upBtn.addEventListener("click", (e) => {
          e.preventDefault();
          list.scrollBy({ top: -step, behavior: "smooth" });
        });
        if (downBtn) downBtn.addEventListener("click", (e) => {
          e.preventDefault();
          list.scrollBy({ top: step, behavior: "smooth" });
        });

        list.addEventListener("scroll", () => updateScrollUI(list, rail, upBtn, downBtn, thumb, controls));
        window.addEventListener("resize", () => updateScrollUI(list, rail, upBtn, downBtn, thumb, controls));
      });

      // Close dropdown when clicking outside
      document.addEventListener("pointerdown", (e) => {
        if (!e.target.closest("[data-dropdown-field]")) closeAll();
      });

      // React to value changes
      pickup?.addEventListener("input", () => {
        syncDestinationLock();
        refreshAllLists();
      });
      destination?.addEventListener("input", refreshAllLists);

      // Init state
      syncDestinationLock();
      refreshAllLists();
    })();

    // -------------------------
    // Quote validation + pricing display
    // -------------------------
    (function () {
      const pickup = document.getElementById("pickup");
      const destination = document.getElementById("destination");

      const validateBtn = document.getElementById("validateQuote");
      const priceRow = document.getElementById("priceRow");
      const priceText = document.getElementById("priceText");
      const copyPriceBtn = document.getElementById("copyPrice");

      if (!pickup || !destination || !validateBtn || !priceRow || !priceText || !copyPriceBtn) return;

      // Detect Amarr <-> Jita routes (case-insensitive)
      const isAmarrJita = (a, b) => {
        const A = norm(a);
        const B = norm(b);
        const amarr = A.includes("amarr") || B.includes("amarr");
        const jita  = A.includes("jita")  || B.includes("jita");
        return amarr && jita;
      };

      // Copy price shortcut (when available)
      bindCopyButton(copyPriceBtn, () => "65 000 000");

      // Reset quote UI
      const resetQuote = () => {
        priceRow.hidden = true;
        copyPriceBtn.disabled = true;
        priceText.textContent = "—";
      };

      // Enable/disable Validate based on selections + route rule
      const syncValidate = () => {
        const okBasic = pickup.value.trim().length > 0 && destination.value.trim().length > 0;
        const okRoute = okBasic && isRouteValid(pickup.value, destination.value);

        validateBtn.disabled = !(okBasic && okRoute);
        if (!(okBasic && okRoute)) resetQuote();
      };

      pickup.addEventListener("input", () => {
        resetQuote();
        syncValidate();
      });
      destination.addEventListener("input", () => {
        resetQuote();
        syncValidate();
      });

      // Compute and show the price on demand
      validateBtn.addEventListener("click", () => {
        if (validateBtn.disabled) return;

        const p = pickup.value.trim();
        const d = destination.value.trim();

        if (isAmarrJita(p, d)) {
          priceText.textContent = "65 000 000 ISK";
          copyPriceBtn.disabled = false;
        } else {
          priceText.textContent = "Pricing unavailable";
          copyPriceBtn.disabled = true;
        }

        priceRow.hidden = false;
      });

      syncValidate();
    })();
  </script>
</body>
</html>
